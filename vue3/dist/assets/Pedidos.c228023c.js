import{aq as $,ar as G,L as H,aC as K,r as C,a0 as J,u as W,o as s,a as r,w as t,b as l,q as n,x as _,y as b,d as c,F as R,v as k,A as a,s as d,a7 as X,z as Y}from"./index.68037d06.js";import{C as Z,q as A}from"./CRUD.c1c6f201.js";import{a as w}from"./VBtn.aff652ee.js";import{a as S,c as I,V as L,b as ee}from"./VCard.a8dc9b6e.js";import{V as E,a as O}from"./VRow.78683adf.js";import{V as N}from"./VDivider.61516259.js";import{V as te}from"./VAvatar.fb28827d.js";import{V as ae}from"./VSheet.68b71799.js";import{V as se}from"./VRating.242d3280.js";import"./transition.de4c50a9.js";const le=$("pedido",{state:()=>({}),actions:{async getPedidos(h){return G.getPaginado("pedidos",h).then(i=>i.data.data).catch(i=>i)}},getters:{}});function oe(){H();const h=K(null),g=C([]);function i(D){return le().getPedidos(D)}return{getAllPedidos:i,pedidos:h,open:g}}const ne={class:"d-flex flex-md-row flex-column font-weight-medium"},ce={class:"font-weight-medium"},de={class:"pl-md-4"},ie={key:0,class:"text-green"},re={key:1,class:"text-pendente font-weight-tin"},ue={class:"d-flex flex-md-row flex-column mt-n5 desc-detail"},me={class:"text-body-2 font-weight-medium desc-detail"},_e={class:"pl-md-8 text-body-2 font-weight-medium desc-detail"},fe={key:0},pe={key:1},ye={class:"pl-md-8 text-body-2 font-weight-medium desc-detail"},he={key:0},ge={key:1},Ae={class:"pl-md-8 text-body-2 font-weight-medium desc-detail"},Ce={class:"font-weight-medium desc-detail"},De=a("b",null,"Nome :",-1),Ve={class:"font-weight-medium desc-detail"},xe=a("b",null,"Valor :",-1),we={class:"font-weight-medium desc-detail"},Oe=a("b",null,"Quantidade :",-1),ve={class:"font-weight-medium desc-detail"},Pe=a("b",null,"SubTotal : ",-1),Te={class:"d-flex flex-row desc-detail"},be=a("p",{class:"text-caption text-sm-subtitle-1 font-weight-bold desc-detail"},"Cor:",-1),ze={__name:"Pedidos",setup(h){const{smAndUp:g}=J(),i=W(),D=C(0),V=C(0),v=C(0),{getAllPedidos:F,pedidos:p,open:y}=oe(),{post:B,findById:U,isNull:P,convertDate:M}=Z();async function z(u,f){y.value[u]=!0;let e={Shop:null},m=p.value.find(o=>o.ID==f);m&&(m.PRODUTOS=await U("getProdutosFromPedidos",m.ID,e)),v.value+=1}function j(u){y.value[u]=!1}function q(){T(),D.value+=1}async function Q(u,f){let e={NOTA:u.target.value,ID_PRODUTO:f};await B("avaliacoes",e),V.value+=1}async function T(){let u={current_page:1,opcao:null,start:null,end:null,search:null,Shop:"T",Precos:null,categoria:null};p.value=await F(u),console.log(p.value);let f=Object.keys(p).length;for(let e=0;e<=f;e++)y.value[e]=!1}return T(),(u,f)=>(s(),r(L,{style:k(c(P)(c(i).getTemas.CARDS_PERFIL)?"":c(i).getTemas.CARDS_PERFIL),width:c(g)?800:"auto"},{default:t(()=>[l(S,null,{default:t(()=>[l(w,{onClick:q,size:"x-small",color:"yellow",icon:"mdi-reload",variant:"text"}),n(" Seus Pedidos... ")]),_:1}),l(I,null,{default:t(()=>[(s(!0),_(R,null,b(c(p),(e,m)=>(s(),r(E,{key:e.ID},{default:t(()=>[l(O,{cols:"12"},{default:t(()=>[l(L,{style:k(c(P)(c(i).getTemas.CARD_PEDIDOS)?"":c(i).getTemas.CARD_PEDIDOS)},{default:t(()=>[l(S,{class:"d-flex justify-space-between desc-detail"},{default:t(()=>[a("p",null,"Pedido #"+d(e.ID),1),e.APROVADO=="T"?(s(),r(A,{key:0,color:"#03C03C"},{default:t(()=>[n(" mdi-package-variant-closed-check ")]),_:1})):(s(),r(A,{key:1,color:"yellow"},{default:t(()=>[n(" mdi-package-variant-minus ")]),_:1}))]),_:2},1024),l(ee,{class:"text-body-2 d-flex flex-row mb-1 justify-space-between desc-detail"},{default:t(()=>[a("div",ne,[a("p",ce," Data do Pedido : "+d(c(M)(e.CREATED_AT)),1),a("p",de,[n(" Estado : "),e.APROVADO=="T"?(s(),_("span",ie," Pago ")):(s(),_("span",re," Pagamento pendente ! "))])]),c(y)[m]?(s(),r(w,{key:1,onClick:o=>j(m),class:"mt-n0 pl-0 pl-md-0",size:"x-small",icon:"",variant:"text"},{default:t(()=>[l(A,{color:"#03C03C"},{default:t(()=>[n(" mdi-arrow-up ")]),_:1})]),_:2},1032,["onClick"])):(s(),r(w,{key:0,onClick:o=>z(m,e.ID),class:"mt-n0 pl-0 pl-md-0",size:"x-small",icon:"",variant:"text"},{default:t(()=>[l(A,{color:"#03C03C"},{default:t(()=>[n(" mdi-arrow-down ")]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024),(s(),r(X,{name:"fade",duration:300,key:v.value},{default:t(()=>[c(y)[m]?(s(),r(I,{key:0},{default:t(()=>[a("div",ue,[a("p",me," Forma de Pagamento : "+d(e.METODO_PAGAMENTO),1),a("p",_e,[n(" Valor Total : "),e.ID_CUPOM!=null?(s(),_("span",fe,d(e.VlTemp.toLocaleString("pt-br",{style:"currency",currency:"BRL"})),1)):(s(),_("span",pe,d(parseFloat(e.VALOR_TOTAL).toLocaleString("pt-br",{style:"currency",currency:"BRL"})),1))]),a("p",ye,[n(" Desconto : "),e.ID_CUPOM!=null?(s(),_("span",he,d(parseInt(e.DESCONTO))+"% ",1)):(s(),_("span",ge," R$ 0,00 "))]),a("p",Ae," Subtotal : "+d(parseFloat(e.VALOR_TOTAL).toLocaleString("pt-br",{style:"currency",currency:"BRL"})),1)]),l(N,{class:"mt-2"}),(s(!0),_(R,null,b(e.PRODUTOS,(o,Re)=>(s(),r(E,{class:"mt-1 mb-1"},{default:t(()=>[l(O,{cols:"6",sm:"4"},{default:t(()=>[l(te,{"max-width":"200",src:o.IMAGE},null,8,["src"])]),_:2},1024),l(O,{cols:"6",class:"d-flex flex-column text-caption text-md-subtitle-1"},{default:t(()=>[a("p",Ce,[De,n(" "+d(o.NOME),1)]),a("p",Ve,[xe,n(" "+d(parseFloat(o.VALOR).toLocaleString("pt-br",{style:"currency",currency:"BRL"})),1)]),a("p",we,[Oe,n(" "+d(o.QUANTIDADE)+" unidade(s) ",1)]),a("p",ve,[Pe,n(" "+d(parseFloat(o.VALOR*o.QUANTIDADE).toLocaleString("pt-br",{style:"currency",currency:"BRL"})),1)]),a("div",Te,[be,l(ae,{color:o.COR_ESCOLHIDA,height:"20",width:"20",elevation:"2",class:"ml-1 ml-md-1 mt-md-1 mt-sm-1 mt-0 cores"},null,8,["color"])]),(s(),r(se,{key:V.value,class:"ml-n1",modelValue:o.AVALIACAO,"onUpdate:modelValue":x=>o.AVALIACAO=x,"bg-color":"orange-lighten-1",color:"#FFD700",density:"compact",onChange:x=>Q(x,o.ID),"half-increments":""},null,8,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1024),l(N)]),_:2},1024))),256))]),_:2},1024)):Y("",!0)]),_:2},1024))]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["style","width"]))}};export{ze as default};
