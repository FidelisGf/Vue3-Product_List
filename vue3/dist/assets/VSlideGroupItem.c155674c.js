import{c as te,N as le,O as ae,g as G,h as ne,s as M,P as se,Q as ue}from"./CRUD.ebf42a23.js";import{a as E}from"./index.1f704c04.js";import{g as $,I as F,L as oe,an as ie,r as b,c as S,P as re,h as ce,b as h,am as ve}from"./index.bfab535e.js";function H(n){const s=Math.abs(n);return Math.sign(n)*(s/((1/.501-2)*(1-s)+1))}function L(n){let{selectedElement:v,containerSize:s,contentSize:u,isRtl:p,currentScrollOffset:a,isHorizontal:o}=n;const t=o?v.clientWidth:v.clientHeight,i=o?v.offsetLeft:v.offsetTop,c=p&&o?u-i-t:i,r=s+a,g=t+c,x=t*.4;return c<=a?a=Math.max(c-x,0):r<=g&&(a=Math.min(a-(r-g-x),u-s)),a}function fe(n){let{selectedElement:v,containerSize:s,contentSize:u,isRtl:p,isHorizontal:a}=n;const o=a?v.clientWidth:v.clientHeight,t=a?v.offsetLeft:v.offsetTop,i=p&&a?u-t-o/2-s/2:t+o/2-s/2;return Math.min(u-s,Math.max(0,i))}const q=Symbol.for("vuetify:v-slide-group"),he=$()({name:"VSlideGroup",props:{centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:q},nextIcon:{type:F,default:"$next"},prevIcon:{type:F,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...te(),...le({selectedClass:"v-slide-group-item--active"})},emits:{"update:modelValue":n=>!0},setup(n,v){let{slots:s}=v;const{isRtl:u}=oe(),{mobile:p}=ie(),a=ae(n,n.symbol),o=b(!1),t=b(0),i=b(0),c=b(0),r=S(()=>n.direction==="horizontal"),{resizeRef:g,contentRect:x}=G(),{resizeRef:f,contentRect:k}=G(),P=S(()=>a.selected.value.length?a.items.value.findIndex(e=>e.id===a.selected.value[0]):-1),N=S(()=>a.selected.value.length?a.items.value.findIndex(e=>e.id===a.selected.value[a.selected.value.length-1]):-1);if(re){let e=-1;ce(()=>[a.selected.value,x.value,k.value,r.value],()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(x.value&&k.value){const l=r.value?"width":"height";i.value=x.value[l],c.value=k.value[l],o.value=i.value+1<c.value}if(P.value>=0&&f.value){const l=f.value.children[N.value];P.value===0||!o.value?t.value=0:n.centerActive?t.value=fe({selectedElement:l,containerSize:i.value,contentSize:c.value,isRtl:u.value,isHorizontal:r.value}):o.value&&(t.value=L({selectedElement:l,containerSize:i.value,contentSize:c.value,isRtl:u.value,currentScrollOffset:t.value,isHorizontal:r.value}))}})})}const I=b(!1);let _=0,V=0;function B(e){const l=r.value?"clientX":"clientY";V=(u.value&&r.value?-1:1)*t.value,_=e.touches[0][l],I.value=!0}function W(e){if(!o.value)return;const l=r.value?"clientX":"clientY",d=u.value&&r.value?-1:1;t.value=d*(V+_-e.touches[0][l])}function X(e){const l=c.value-i.value;t.value<0||!o.value?t.value=0:t.value>=l&&(t.value=l),I.value=!1}function Y(){!g.value||(g.value[r.value?"scrollLeft":"scrollTop"]=0)}const R=b(!1);function D(e){if(R.value=!0,!(!o.value||!f.value)){for(const l of e.composedPath())for(const d of f.value.children)if(d===l){t.value=L({selectedElement:d,containerSize:i.value,contentSize:c.value,isRtl:u.value,currentScrollOffset:t.value,isHorizontal:r.value});return}}}function K(e){R.value=!1}function U(e){var l;!R.value&&!(e.relatedTarget&&((l=f.value)==null?void 0:l.contains(e.relatedTarget)))&&m()}function j(e){!f.value||(r.value?e.key==="ArrowRight"?m(u.value?"prev":"next"):e.key==="ArrowLeft"&&m(u.value?"next":"prev"):e.key==="ArrowDown"?m("next"):e.key==="ArrowUp"&&m("prev"),e.key==="Home"?m("first"):e.key==="End"&&m("last"))}function m(e){var l,d,z,w,C;if(!!f.value)if(!e)(l=[...f.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(ee=>!ee.hasAttribute("disabled"))[0])==null||l.focus();else if(e==="next"){const y=(d=f.value.querySelector(":focus"))==null?void 0:d.nextElementSibling;y?y.focus():m("first")}else if(e==="prev"){const y=(z=f.value.querySelector(":focus"))==null?void 0:z.previousElementSibling;y?y.focus():m("last")}else e==="first"?(w=f.value.firstElementChild)==null||w.focus():e==="last"&&((C=f.value.lastElementChild)==null||C.focus())}function O(e){const l=t.value+(e==="prev"?-1:1)*i.value;t.value=ve(l,0,c.value-i.value)}const Q=S(()=>{let e=t.value>c.value-i.value?-(c.value-i.value)+H(c.value-i.value-t.value):-t.value;t.value<=0&&(e=H(-t.value));const l=u.value&&r.value?-1:1;return{transform:`translate${r.value?"X":"Y"}(${l*e}px)`,transition:I.value?"none":"",willChange:I.value?"transform":""}}),T=S(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),A=S(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!p.value;case!0:return o.value||Math.abs(t.value)>0;case"mobile":return p.value||o.value||Math.abs(t.value)>0;default:return!p.value&&(o.value||Math.abs(t.value)>0)}}),J=S(()=>Math.abs(t.value)>0),Z=S(()=>c.value>Math.abs(t.value)+i.value);return ne(()=>h(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!r.value,"v-slide-group--has-affixes":A.value,"v-slide-group--is-overflowing":o.value}],tabindex:R.value||a.selected.value.length?-1:0,onFocus:U},{default:()=>{var e,l,d,z,w;return[A.value&&h("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!J.value}],onClick:()=>O("prev")},[(l=(e=s.prev)==null?void 0:e.call(s,T.value))!=null?l:h(E,null,{default:()=>[h(M,{icon:u.value?n.nextIcon:n.prevIcon},null)]})]),h("div",{key:"container",ref:g,class:"v-slide-group__container",onScroll:Y},[h("div",{ref:f,class:"v-slide-group__content",style:Q.value,onTouchstartPassive:B,onTouchmovePassive:W,onTouchendPassive:X,onFocusin:D,onFocusout:K,onKeydown:j},[(d=s.default)==null?void 0:d.call(s,T.value)])]),A.value&&h("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Z.value}],onClick:()=>O("next")},[(w=(z=s.next)==null?void 0:z.call(s,T.value))!=null?w:h(E,null,{default:()=>[h(M,{icon:u.value?n.prevIcon:n.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:O,scrollOffset:t,focus:m}}}),Se=$()({name:"VSlideGroupItem",props:{...se()},emits:{"group:selected":n=>!0},setup(n,v){let{slots:s}=v;const u=ue(n,q);return()=>{var p;return(p=s.default)==null?void 0:p.call(s,{isSelected:u.isSelected.value,select:u.select,toggle:u.toggle,selectedClass:u.selectedClass.value})}}});export{he as V,Se as a};
